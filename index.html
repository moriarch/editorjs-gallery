<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Editor.js + ImageGallery Dev</title>
</head>
<body>
  <div class="" id="save">123123123</div>
  <div id="editorjs"></div>

  <!-- Подключаем Editor.js -->
  <script src="https://cdn.jsdelivr.net/npm/@editorjs/editorjs@latest"></script> 

  <!-- Подключаем SortableJS -->
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script> 

  <!-- Импортируем наш ImageGallery из Vite Dev Server -->
  <script type="module">
    import ImageGallery from 'http://localhost:5173/src/index.js';

    const editor = new EditorJS({
      holder: 'editorjs',
      tools: {
        gallery: {
          class: ImageGallery,
          config: {
            sortableJs: Sortable,
            caption: 'optional',
            uploader: {
              /**
               * Эмуляция загрузки файла
               * @param {File} file — файл, выбранный пользователем
               * @returns {Promise<{success: number, file: {url: string, id: number}}>}
               */
              uploadByFile(file) {
                return new Promise((resolve) => {
                  // Эмулируем задержку загрузки (например, 1 секунда)
                  setTimeout(() => {
                    resolve({
                      success: 1,
                      file: {
                        url: 'https://plus.unsplash.com/premium_photo-1673967859849-c8a37fa85aeb?q=80&w=3284&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D', // ваш тестовый URL
                        id: Date.now(), // уникальный ID для каждого файла
                      },
                    });
                  }, 1000);
                });
              }
            }
          }
        }
      }
    });

    document.getElementById('save').addEventListener('click',()=>{

editor.save().then((outputData) => {
  console.log('Article data: ', outputData)
}).catch((error) => {
  console.log('Saving failed: ', error)
});
    })
  </script>
</body>
</html>